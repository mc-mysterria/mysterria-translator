# PlaceholderAPI placeholders supported:
#   %lang_(key)%           - Shows the translation for the key in the player's language
#   %lang_player%          - Shows the player's current language
#   %lang_player_(nick)%   - Shows the specified player's language

# Enable debug mode for more detailed logs.
debug: true

# Default language for the plugin.
# If a translation is not found in the player's language, this language will be used as fallback.
defaultLang: en_us

# Translation cache size (improves performance, but uses more memory).
translationCacheSize: 500

# Storage configuration for player languages:
# type: yaml, sqlite or mysql
# Data from yaml it's automatically migrated to sqlite or mysql.
storage:
  type: yaml # yaml, sqlite or mysql
  mysql:
    host: localhost
    port: 3306
    database: mtranslator
    user: root
    password: password
    properties:
      autoReconnect: true
      useSSL: false
      connectTimeout: 5000
      characterEncoding: utf8

# Dynamic translation settings
translation:
  # Enable/disable automatic translation
  enabled: true

  # Translation provider: "ollama", "libretranslate", "gemini", or "openai"
  # Supports multiple providers with automatic fallback (comma-separated)
  # - "ollama": Uses local Ollama instance (AI models)
  # - "libretranslate": Uses LibreTranslate API service
  # - "gemini": Uses Google Gemini API (supports automatic language detection)
  # - "openai": Uses OpenAI API (GPT models)
  #
  # Examples:
  #   provider: "gemini"              - Single provider (no fallback)
  #   provider: "gemini, ollama"      - Try Gemini first, fallback to Ollama if it fails
  #   provider: "gemini, openai, ollama" - Try all three in order
  provider: "ollama"

  # Global chat settings
  globalChat:
    # Enable global chat translation mode
    # When enabled, only messages starting with the prefix will be translated
    enabled: true

    # Prefix that triggers global chat translation
    # Messages starting with this symbol will be translated and broadcasted globally
    prefix: "!"

    # Remove the prefix from the translated message
    # If true: "!Hello" becomes "Hello" in translation
    # If false: "!Hello" stays "!Hello" in translation
    removePrefix: true

    # Global chat format (when using custom display mode)
    # This overrides the regular customFormat for global chat messages
    globalFormat: "&8[&bГ&8] {luckperms_prefix}&f{player_name}&7 >> &f{player_chat_color}{player_chat_decoration}{translated_message}"

    # Console chat format for global messages (when using custom display mode)
    # Used for non-player senders like DiscordSRV or the console itself
    consoleFormat: "&8[&bDiscord&8] &f{player_name}&7 >> &f{translated_message}"

  # Range chat settings (for non-global messages when global chat is enabled)
  rangeChat:
    # Enable range-based translation for regular messages
    # When true, regular messages (without global prefix) will be translated for nearby players
    enabled: true

    # Range in blocks for translating messages
    # Players within this distance will receive translated messages
    range: 100.0

    # Include players in different worlds
    # If false, only players in the same world will receive translations
    crossWorld: false

    # Range chat format (when using custom display mode)
    # This overrides the regular customFormat for range chat messages
    rangeFormat: "&8[&eР&8] {luckperms_prefix}&f{player_name}&7 >> &f{player_chat_color}{player_chat_decoration}{translated_message}"

  # Ollama configuration
  ollama:
    url: "https://ollama.mysterria.net"
    model: "gemma2:2b"  # Recommended: qwen2.5:3b or gemma2:2b
    apiKey: ""  # Optional: Bearer token for authenticated Ollama instances
    connectTimeout: 10  # Connection timeout in seconds (default: 10)
    requestTimeout: 90  # Request timeout in seconds - AI inference can be slow (default: 90)

  # LibreTranslate configuration
  libretranslate:
    url: "https://libre.mysterria.net/translate"
    apiKey: "your-api-key-here"
    alternatives: 3  # Number of alternative translations to request
    format: "text"   # Format: "text" or "html"
    connectTimeout: 5  # Connection timeout in seconds (default: 5)
    readTimeout: 10    # Read timeout in seconds (default: 10)

  # Gemini configuration
  gemini:
    # List of API keys (for rate limit handling)
    # Add multiple keys separated by commas for better reliability
    apiKeys:
      - "your-gemini-api-key-1"
      - "your-gemini-api-key-2"
    # Model to use (default: gemini-2.0-flash)
    # Options: gemini-2.0-flash, gemini-1.5-flash, gemini-1.5-pro, etc.
    model: "gemini-2.0-flash"
    # Enable contextual translation (includes online player names)
    includeContext: true
    connectTimeout: 10  # Connection timeout in seconds (default: 10)
    readTimeout: 15     # Read timeout in seconds (default: 15)

  # OpenAI configuration
  openai:
    apiKey: "sk-..."  # Your OpenAI API key
    # Model to use (default: gpt-4o-mini)
    # Options: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo, or custom models
    model: "gpt-4o-mini"
    # Base URL for OpenAI API (default: https://api.openai.com/v1)
    # Can be changed for custom endpoints or proxies
    baseUrl: "https://api.openai.com/v1"
    connectTimeout: 10  # Connection timeout in seconds (default: 10)
    readTimeout: 30     # Read timeout in seconds (default: 30)
    # Use legacy max_tokens parameter instead of max_completion_tokens (default: false)
    # Only enable this for older models that don't support max_completion_tokens
    useLegacyMaxTokens: false

  # Cache settings
  cacheExpirySeconds: 30

  # Rate limiting (messages per time window per player)
  rateLimitMessages: 2
  rateLimitWindowSeconds: 10

  # Translation thresholds
  minMessageLength: 3
  maxRetries: 2

  # Translation display configuration
  display:
    # Display mode: "separate", "replace", "compact", "custom"
    # - "separate": Show original message first, then translated message (current behavior)
    # - "replace": Replace original message with translated version for recipients
    # - "compact": Show translation inline with hover for original
    # - "custom": Use custom format with PlaceholderAPI support
    mode: "custom"

    # Translation prefix for separate/compact modes
    prefix: "[T]"

    # Show translation indicator in hover tooltip
    showHover: true

    # Color for translation indicator (minecraft color codes or hex)
    indicatorColor: "aqua"

    # Custom format for translated messages (when mode is "custom")
    # Available placeholders:
    # - {player_name}: Player's name
    # - {translated_message}: The translated message
    # - {original_message}: The original message
    # - {source_language}: Source language (e.g., "Ukrainian")
    # - {target_language}: Target language (e.g., "English")
    # - Any PlaceholderAPI placeholder (e.g., {luckperms_prefix}, {player_chat_color})
    customFormat: "&8[&eТ&8] {luckperms_prefix}&f{player_name}&7 >> &f{player_chat_color}{player_chat_decoration}{translated_message}"

  # Debug translation events
  debug: true